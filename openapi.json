{"openapi":"3.1.0","info":{"title":"Amber API","description":"\n    **Amber â€” Preserving Context, Revealing Insight**\n\n    This API provides access to a hybrid retrieval system that combines\n    vector similarity search with knowledge graph reasoning to deliver\n    contextual, sourced, and high-quality answers over document collections.\n\n    ## Features\n\n    - **Document Ingestion**: Upload and process multi-format documents\n    - **Hybrid Retrieval**: Combine vector and graph-based search\n    - **Augmented Generation**: Generate grounded answers with citations\n    - **Full Observability**: Track every stage of processing\n\n    ## Authentication\n\n    All endpoints (except health checks) require an API key.\n    Pass your key in the `X-API-Key` header.\n    ","version":"0.0.1-alpha"},"paths":{"/health":{"get":{"tags":["health"],"summary":"Liveness Probe","description":"Returns 200 if the process is alive. Used by Kubernetes liveness probes.","operationId":"liveness_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LivenessResponse"}}}}}}},"/health/ready":{"get":{"tags":["health"],"summary":"Readiness Probe","description":"Checks all dependencies and returns their status. Used by Kubernetes readiness probes.","operationId":"readiness_health_ready_get","responses":{"200":{"description":"All dependencies healthy","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReadinessResponse"}}}},"503":{"description":"One or more dependencies unhealthy"}}}},"/api/health":{"get":{"tags":["health"],"summary":"Liveness Probe","description":"Returns 200 if the process is alive. Used by Kubernetes liveness probes.","operationId":"liveness_api_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LivenessResponse"}}}}}}},"/api/health/ready":{"get":{"tags":["health"],"summary":"Readiness Probe","description":"Checks all dependencies and returns their status. Used by Kubernetes readiness probes.","operationId":"readiness_api_health_ready_get","responses":{"200":{"description":"All dependencies healthy","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReadinessResponse"}}}},"503":{"description":"One or more dependencies unhealthy"}}}},"/api/setup/status":{"get":{"tags":["setup"],"summary":"Get Setup Status","description":"Returns the current setup status including which features are installed.","operationId":"get_setup_status_api_setup_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetupStatusResponse"}}}}}}},"/api/setup/install":{"post":{"tags":["setup"],"summary":"Install Features","description":"Install one or more optional features in the background.","operationId":"install_features_api_setup_install_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstallRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstallResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/setup/skip":{"post":{"tags":["setup"],"summary":"Skip Setup","description":"Mark setup as complete without installing optional features.","operationId":"skip_setup_api_setup_skip_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstallResponse"}}}}}}},"/api/setup/check-required":{"get":{"tags":["setup"],"summary":"Check Required Services","description":"Verify that required services (PostgreSQL, Neo4j, Milvus, Redis) are reachable.","operationId":"check_required_services_api_setup_check_required_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequiredServicesResponse"}}}}}}},"/v1/query":{"post":{"tags":["query"],"summary":"Query the Knowledge Base","description":"Submit a natural language query to retrieve relevant information\n    from the knowledge base.\n\n    **Phase 2 Implementation**: Vector retrieval with LLM answer generation.\n    - Embeds query and searches Milvus for relevant chunks\n    - Reranks results using FlashRank\n    - Generates answer with citations using LLM\n    \n    **Structured Queries**: List/count queries are executed directly via Cypher\n    for instant responses without LLM generation.","operationId":"query_v1_query_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}},"required":true},"responses":{"200":{"description":"Query response (can be QueryResponse or StructuredQueryResponse)","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/QueryResponse"},{"$ref":"#/components/schemas/StructuredQueryResponse"}],"title":"Response Query V1 Query Post"},"examples":{"rag_response":{"summary":"RAG Response","value":{"answer":"...","sources":[],"timing":{}}},"structured_response":{"summary":"Structured Query Response","value":{"query_type":"list_documents","data":[],"count":0}}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/query/stream":{"get":{"tags":["query"],"summary":"Stream Query Response","description":"Stream the query response using Server-Sent Events.","operationId":"query_stream_v1_query_stream_get","parameters":[{"name":"query","in":"query","required":false,"schema":{"type":"string","title":"Query"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["query"],"summary":"Stream Query Response","description":"Stream the query response using Server-Sent Events.","operationId":"query_stream_v1_query_stream_get","parameters":[{"name":"query","in":"query","required":false,"schema":{"type":"string","title":"Query"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/documents":{"post":{"tags":["documents"],"summary":"Upload Document","description":"Upload a document for ingestion into the knowledge base.\n    \n    Returns 202 Accepted immediately with a document ID.\n    Use the events_url to monitor processing progress via SSE.","operationId":"upload_document_v1_documents_post","requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_document_v1_documents_post"}}}},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["documents"],"summary":"List Documents","description":"List all documents in the knowledge base.","operationId":"list_documents_v1_documents_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","title":"Tenant Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentResponse"},"title":"Response List Documents V1 Documents Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/documents/{document_id}/events":{"get":{"tags":["Events"],"summary":"Stream Document Events","description":"Stream document processing events via SSE.\n\nSubscribes to Redis Pub/Sub channel for the document and streams\nstatus updates to the client.\n\nArgs:\n    document_id: ID of the document to monitor.\n    \nReturns:\n    StreamingResponse: SSE stream of status updates.","operationId":"stream_document_events_v1_documents__document_id__events_get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/documents/{document_id}":{"get":{"tags":["documents"],"summary":"Get Document","description":"Get details of a specific document including enrichment data and stats.","operationId":"get_document_v1_documents__document_id__get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["documents"],"summary":"Delete Document","description":"Delete a document from the knowledge base.","operationId":"delete_document_v1_documents__document_id__delete","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/documents/{document_id}/communities":{"get":{"tags":["documents"],"summary":"Get Document Communities","description":"Get communities (entity clusters) associated with this document.","operationId":"get_document_communities_v1_documents__document_id__communities_get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Document Communities V1 Documents  Document Id  Communities Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/documents/{document_id}/file":{"get":{"tags":["documents"],"summary":"Get Document File","description":"Download the original document file from storage.","operationId":"get_document_file_v1_documents__document_id__file_get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/documents/{document_id}/entities":{"get":{"tags":["documents"],"summary":"Get Document Entities","description":"Get entities extracted from a specific document with pagination.","operationId":"get_document_entities_v1_documents__document_id__entities_get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Document Entities V1 Documents  Document Id  Entities Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/documents/{document_id}/relationships":{"get":{"tags":["documents"],"summary":"Get Document Relationships","description":"Get relationships between entities in this document with pagination.","operationId":"get_document_relationships_v1_documents__document_id__relationships_get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Document Relationships V1 Documents  Document Id  Relationships Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/documents/{document_id}/chunks":{"get":{"tags":["documents"],"summary":"Get Document Chunks","description":"Retrieve chunks for a specific document with pagination.\n\nArgs:\n    document_id: Document UUID\n    limit: Maximum number of chunks to return (default: 50)\n    offset: Number of chunks to skip (default: 0)\n    tenant_id: Tenant ID from context\n    session: Database session\n\nReturns:\n    Dict with chunks, total count, limit, and offset","operationId":"get_document_chunks_v1_documents__document_id__chunks_get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Document Chunks V1 Documents  Document Id  Chunks Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/jobs":{"get":{"tags":["admin","admin-jobs"],"summary":"List Jobs","description":"List active and recent Celery tasks.\n\nReturns a list of tasks with their current status, progress, and metadata.","operationId":"list_jobs_v1_admin_jobs_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/JobStatus"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"task_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by task type (e.g., 'process_document')","title":"Task Type"},"description":"Filter by task type (e.g., 'process_document')"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Maximum results","default":50,"title":"Limit"},"description":"Maximum results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/jobs/{task_id}":{"get":{"tags":["admin","admin-jobs"],"summary":"Get Job","description":"Get detailed information about a specific task.\n\nReturns the task's current status, progress, result, or error.","operationId":"get_job_v1_admin_jobs__task_id__get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/jobs/{task_id}/cancel":{"post":{"tags":["admin","admin-jobs"],"summary":"Cancel Job","description":"Cancel or revoke a task.\n\n- For pending tasks: Removes from queue\n- For running tasks: Sends revoke signal (use terminate=True to force kill)","operationId":"cancel_job_v1_admin_jobs__task_id__cancel_post","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}},{"name":"terminate","in":"query","required":false,"schema":{"type":"boolean","description":"Force terminate if running","default":false,"title":"Terminate"},"description":"Force terminate if running"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancelResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/jobs/queues/status":{"get":{"tags":["admin","admin-jobs"],"summary":"Get Queue Status","description":"Get queue depths and worker status.\n\nReturns information about all registered queues and connected workers.","operationId":"get_queue_status_v1_admin_jobs_queues_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueuesResponse"}}}}}}},"/v1/admin/config/schema":{"get":{"tags":["admin","admin-config"],"summary":"Get Config Schema","description":"Get configuration schema for dynamic form generation.\n\nReturns field definitions with types, constraints, and groupings\nfor rendering the tuning panel UI.","operationId":"get_config_schema_v1_admin_config_schema_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigSchemaResponse"}}}}}}},"/v1/admin/config/tenants/{tenant_id}":{"get":{"tags":["admin","admin-config"],"summary":"Get Tenant Config","description":"Get configuration for a specific tenant.\n\nReturns all tunable parameters and their current values.","operationId":"get_tenant_config_v1_admin_config_tenants__tenant_id__get","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantConfigResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["admin","admin-config"],"summary":"Update Tenant Config","description":"Update configuration for a specific tenant.\n\nOnly provided fields are updated; others remain unchanged.\nChanges take effect immediately for subsequent requests.","operationId":"update_tenant_config_v1_admin_config_tenants__tenant_id__put","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantConfigUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantConfigResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/config/tenants/{tenant_id}/reset":{"post":{"tags":["admin","admin-config"],"summary":"Reset Tenant Config","description":"Reset tenant configuration to defaults.\n\nRemoves all custom configuration, reverting to system defaults.","operationId":"reset_tenant_config_v1_admin_config_tenants__tenant_id__reset_post","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/curation/flags":{"get":{"tags":["admin","admin-curation"],"summary":"List Flags","description":"List flags in the curation queue.\n\nReturns paginated list of analyst-reported issues with filtering options.","operationId":"list_flags_v1_admin_curation_flags_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"flag_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by type","title":"Flag Type"},"description":"Filter by type"},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlagListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["admin","admin-curation"],"summary":"Create Flag","description":"Create a new flag (for testing or manual flagging).\n\nIn production, flags are typically created from the Analyst UI's feedback buttons.","operationId":"create_flag_v1_admin_curation_flags_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlagCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/curation/flags/{flag_id}":{"get":{"tags":["admin","admin-curation"],"summary":"Get Flag","description":"Get detailed information about a specific flag.\n\nReturns full context including source chunk, query, and retrieval trace.","operationId":"get_flag_v1_admin_curation_flags__flag_id__get","parameters":[{"name":"flag_id","in":"path","required":true,"schema":{"type":"string","title":"Flag Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlagDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["admin","admin-curation"],"summary":"Resolve Flag","description":"Resolve a flag with an action.\n\nActions:\n- `accept`: Accept the flag and apply correction\n- `reject`: Reject the flag (false positive)\n- `merge`: Merge entities (requires merge_target_id)","operationId":"resolve_flag_v1_admin_curation_flags__flag_id__put","parameters":[{"name":"flag_id","in":"path","required":true,"schema":{"type":"string","title":"Flag Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlagResolution"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlagDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/curation/stats":{"get":{"tags":["admin","admin-curation"],"summary":"Get Curation Stats","description":"Get curation queue statistics with optimized queries and caching.\n\nReturns counts by status and type, plus resolution time metrics.","operationId":"get_curation_stats_v1_admin_curation_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CurationStats"}}}}}}},"/v1/admin/maintenance/stats":{"get":{"tags":["admin","admin-maintenance"],"summary":"Get System Stats","description":"Get comprehensive system statistics.\n\nReturns counts and metrics from database, cache, and vector store.","operationId":"get_system_stats_v1_admin_maintenance_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemStats"}}}}}}},"/v1/admin/maintenance/cache/clear":{"post":{"tags":["admin","admin-maintenance"],"summary":"Clear Cache","description":"Clear Redis cache.\n\n- Without pattern: Clears all cache keys\n- With pattern: Clears matching keys (e.g., \"query:*\", \"embed:*\")","operationId":"clear_cache_v1_admin_maintenance_cache_clear_post","parameters":[{"name":"pattern","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pattern"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MaintenanceResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/maintenance/prune/orphans":{"post":{"tags":["admin","admin-maintenance"],"summary":"Prune Orphans","description":"Remove orphan nodes from the graph.\n\nFinds and removes:\n- Entities not connected to any chunks\n- Chunks not connected to any documents\n- Communities with no members","operationId":"prune_orphans_v1_admin_maintenance_prune_orphans_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MaintenanceResult"}}}}}}},"/v1/admin/maintenance/prune/stale-communities":{"post":{"tags":["admin","admin-maintenance"],"summary":"Prune Stale Communities","description":"Remove stale community summaries.\n\nRemoves community summaries older than the specified age that haven't been refreshed.","operationId":"prune_stale_communities_v1_admin_maintenance_prune_stale_communities_post","parameters":[{"name":"max_age_days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Max Age Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MaintenanceResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/maintenance/reconciliation":{"get":{"tags":["admin","admin-maintenance"],"summary":"Get Reconciliation Status","description":"Get dual-write reconciliation status.\n\nShows sync health between primary (Neo4j) and secondary (Milvus) stores.","operationId":"get_reconciliation_status_v1_admin_maintenance_reconciliation_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReconciliationStatus"}}}}}}},"/v1/admin/maintenance/reindex":{"post":{"tags":["admin","admin-maintenance"],"summary":"Trigger Reindex","description":"Trigger vector index rebuild.\n\n- Without collection: Rebuilds all indexes\n- With collection: Rebuilds specific collection\n\nThis is an async operation - check task status via /admin/jobs.","operationId":"trigger_reindex_v1_admin_maintenance_reindex_post","parameters":[{"name":"collection","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Collection"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MaintenanceResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/maintenance/vectors/collections":{"get":{"tags":["admin","admin-maintenance"],"summary":"Get Vector Collections","description":"Get detailed information about all Milvus collections.\n\nReturns collection stats without loading collections into memory.\nUsed by the Vector Store admin page.","operationId":"get_vector_collections_v1_admin_maintenance_vectors_collections_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VectorCollectionsResponse"}}}}}}},"/v1/admin/chat/history":{"get":{"tags":["admin","Admin - Chat History"],"summary":"List Chat History","description":"List recent chat conversations.\n\nRetrieves generation operations from UsageLog with optional feedback data.","operationId":"list_chat_history_v1_admin_chat_history_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/chat/history/{request_id}":{"get":{"tags":["admin","Admin - Chat History"],"summary":"Get Conversation Detail","description":"Get full details for a specific conversation.\n\nIncludes complete query, response, tokens, cost, and feedback.","operationId":"get_conversation_detail_v1_admin_chat_history__request_id__get","parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"string","title":"Request Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/ragas/stats":{"get":{"tags":["admin","admin","ragas"],"summary":"Get Ragas Stats","description":"Get overall Ragas benchmark statistics.","operationId":"get_ragas_stats_v1_admin_ragas_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BenchmarkStatsResponse"}}}}}}},"/v1/admin/ragas/datasets":{"get":{"tags":["admin","admin","ragas"],"summary":"List Datasets","description":"List available golden datasets.","operationId":"list_datasets_v1_admin_ragas_datasets_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/DatasetInfo"},"type":"array","title":"Response List Datasets V1 Admin Ragas Datasets Get"}}}}}},"post":{"tags":["admin","admin","ragas"],"summary":"Upload Dataset","description":"Upload a new golden dataset (JSON file).","operationId":"upload_dataset_v1_admin_ragas_datasets_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_dataset_v1_admin_ragas_datasets_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/ragas/run-benchmark":{"post":{"tags":["admin","admin","ragas"],"summary":"Run Benchmark","description":"Trigger a new Ragas benchmark run.","operationId":"run_benchmark_v1_admin_ragas_run_benchmark_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunBenchmarkRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunBenchmarkResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/ragas/job/{job_id}":{"get":{"tags":["admin","admin","ragas"],"summary":"Get Benchmark Job","description":"Get status and results of a benchmark run.","operationId":"get_benchmark_job_v1_admin_ragas_job__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BenchmarkRunDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/ragas/comparison":{"get":{"tags":["admin","admin","ragas"],"summary":"Compare Runs","description":"Compare results across multiple benchmark runs.","operationId":"compare_runs_v1_admin_ragas_comparison_get","parameters":[{"name":"run_ids","in":"query","required":true,"schema":{"type":"string","title":"Run Ids"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/admin/ragas/runs":{"get":{"tags":["admin","admin","ragas"],"summary":"List Benchmark Runs","description":"List benchmark runs with optional filtering.","operationId":"list_benchmark_runs_v1_admin_ragas_runs_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}},{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status Filter"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BenchmarkRunSummary"},"title":"Response List Benchmark Runs V1 Admin Ragas Runs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"BenchmarkRunDetail":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"dataset_name":{"type":"string","title":"Dataset Name"},"status":{"type":"string","title":"Status"},"metrics":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metrics"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"details":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Details"},"config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Config"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["id","tenant_id","dataset_name","status","metrics","started_at","completed_at","created_at","details","config","error_message"],"title":"BenchmarkRunDetail","description":"Detailed benchmark run with per-sample results."},"BenchmarkRunSummary":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"dataset_name":{"type":"string","title":"Dataset Name"},"status":{"type":"string","title":"Status"},"metrics":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metrics"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","tenant_id","dataset_name","status","metrics","started_at","completed_at","created_at"],"title":"BenchmarkRunSummary","description":"Summary of a benchmark run."},"BenchmarkStatsResponse":{"properties":{"total_runs":{"type":"integer","title":"Total Runs"},"completed_runs":{"type":"integer","title":"Completed Runs"},"failed_runs":{"type":"integer","title":"Failed Runs"},"avg_faithfulness":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Faithfulness"},"avg_relevancy":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Relevancy"}},"type":"object","required":["total_runs","completed_runs","failed_runs","avg_faithfulness","avg_relevancy"],"title":"BenchmarkStatsResponse","description":"Aggregate statistics for benchmarks."},"Body_upload_dataset_v1_admin_ragas_datasets_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_dataset_v1_admin_ragas_datasets_post"},"Body_upload_document_v1_documents_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"Document file to upload"},"tenant_id":{"type":"string","title":"Tenant Id","description":"Tenant ID (optional, uses default)"}},"type":"object","required":["file"],"title":"Body_upload_document_v1_documents_post"},"CacheStats":{"properties":{"memory_used_bytes":{"type":"integer","title":"Memory Used Bytes","default":0},"memory_max_bytes":{"type":"integer","title":"Memory Max Bytes","default":0},"memory_usage_percent":{"type":"number","title":"Memory Usage Percent","default":0},"keys_total":{"type":"integer","title":"Keys Total","default":0},"hit_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Hit Rate"},"miss_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Miss Rate"},"evictions":{"type":"integer","title":"Evictions","default":0}},"type":"object","title":"CacheStats","description":"Cache statistics."},"CancelResponse":{"properties":{"task_id":{"type":"string","title":"Task Id"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["task_id","status","message"],"title":"CancelResponse","description":"Cancel task response."},"ChatHistoryItem":{"properties":{"request_id":{"type":"string","title":"Request Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"query_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query Text"},"response_preview":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Response Preview"},"model":{"type":"string","title":"Model"},"provider":{"type":"string","title":"Provider"},"total_tokens":{"type":"integer","title":"Total Tokens"},"cost":{"type":"number","title":"Cost"},"has_feedback":{"type":"boolean","title":"Has Feedback"},"feedback_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Feedback Score"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["request_id","tenant_id","model","provider","total_tokens","cost","has_feedback","created_at"],"title":"ChatHistoryItem","description":"Single chat history entry."},"ChatHistoryResponse":{"properties":{"conversations":{"items":{"$ref":"#/components/schemas/ChatHistoryItem"},"type":"array","title":"Conversations"},"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"}},"type":"object","required":["conversations","total","limit","offset"],"title":"ChatHistoryResponse","description":"Paginated chat history."},"ConfigSchemaField":{"properties":{"name":{"type":"string","title":"Name"},"type":{"type":"string","title":"Type"},"label":{"type":"string","title":"Label"},"description":{"type":"string","title":"Description"},"default":{"title":"Default"},"min":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min"},"max":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max"},"step":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Step"},"options":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Options"},"group":{"type":"string","title":"Group","default":"general"}},"type":"object","required":["name","type","label","description","default"],"title":"ConfigSchemaField","description":"Schema field definition for UI rendering."},"ConfigSchemaResponse":{"properties":{"fields":{"items":{"$ref":"#/components/schemas/ConfigSchemaField"},"type":"array","title":"Fields"},"groups":{"items":{"type":"string"},"type":"array","title":"Groups"}},"type":"object","required":["fields","groups"],"title":"ConfigSchemaResponse","description":"Configuration schema for form generation."},"ConversationDetail":{"properties":{"request_id":{"type":"string","title":"Request Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"trace_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trace Id"},"query_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query Text"},"response_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Response Text"},"model":{"type":"string","title":"Model"},"provider":{"type":"string","title":"Provider"},"input_tokens":{"type":"integer","title":"Input Tokens"},"output_tokens":{"type":"integer","title":"Output Tokens"},"total_tokens":{"type":"integer","title":"Total Tokens"},"cost":{"type":"number","title":"Cost"},"feedback":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Feedback"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["request_id","tenant_id","model","provider","input_tokens","output_tokens","total_tokens","cost","metadata","created_at"],"title":"ConversationDetail","description":"Full conversation details."},"CurationStats":{"properties":{"total_flags":{"type":"integer","title":"Total Flags"},"pending_count":{"type":"integer","title":"Pending Count"},"accepted_count":{"type":"integer","title":"Accepted Count"},"rejected_count":{"type":"integer","title":"Rejected Count"},"merged_count":{"type":"integer","title":"Merged Count"},"avg_resolution_time_hours":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Resolution Time Hours"},"flags_by_type":{"additionalProperties":true,"type":"object","title":"Flags By Type"}},"type":"object","required":["total_flags","pending_count","accepted_count","rejected_count","merged_count","flags_by_type"],"title":"CurationStats","description":"Curation queue statistics."},"DatabaseStats":{"properties":{"documents_total":{"type":"integer","title":"Documents Total","default":0},"documents_ready":{"type":"integer","title":"Documents Ready","default":0},"documents_processing":{"type":"integer","title":"Documents Processing","default":0},"documents_failed":{"type":"integer","title":"Documents Failed","default":0},"chunks_total":{"type":"integer","title":"Chunks Total","default":0},"entities_total":{"type":"integer","title":"Entities Total","default":0},"relationships_total":{"type":"integer","title":"Relationships Total","default":0},"communities_total":{"type":"integer","title":"Communities Total","default":0}},"type":"object","title":"DatabaseStats","description":"Database statistics."},"DatasetInfo":{"properties":{"name":{"type":"string","title":"Name"},"sample_count":{"type":"integer","title":"Sample Count"},"path":{"type":"string","title":"Path"}},"type":"object","required":["name","sample_count","path"],"title":"DatasetInfo","description":"Information about a golden dataset."},"DateRange":{"properties":{"start":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start","description":"Start of date range"},"end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End","description":"End of date range"}},"type":"object","title":"DateRange","description":"Date range filter for queries."},"DependencyStatus":{"properties":{"status":{"type":"string","title":"Status"},"latency_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latency Ms"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["status"],"title":"DependencyStatus","description":"Individual dependency status."},"DocumentResponse":{"properties":{"id":{"type":"string","title":"Id"},"filename":{"type":"string","title":"Filename"},"title":{"type":"string","title":"Title"},"status":{"type":"string","title":"Status"},"domain":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Domain"},"tenant_id":{"type":"string","title":"Tenant Id"},"source_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Type","default":"upload"},"content_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Type"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary"},"document_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Document Type"},"keywords":{"items":{"type":"string"},"type":"array","title":"Keywords","default":[]},"hashtags":{"items":{"type":"string"},"type":"array","title":"Hashtags","default":[]},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"stats":{"anyOf":[{"additionalProperties":{"type":"integer"},"type":"object"},{"type":"null"}],"title":"Stats"}},"type":"object","required":["id","filename","title","status","tenant_id","created_at"],"title":"DocumentResponse","description":"Response model for document details."},"DocumentUploadResponse":{"properties":{"document_id":{"type":"string","title":"Document Id"},"status":{"type":"string","title":"Status"},"events_url":{"type":"string","title":"Events Url"},"message":{"type":"string","title":"Message"}},"type":"object","required":["document_id","status","events_url","message"],"title":"DocumentUploadResponse","description":"Response model for document upload."},"FeatureStatus":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"size_mb":{"type":"integer","title":"Size Mb"},"status":{"type":"string","title":"Status"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["id","name","description","size_mb","status"],"title":"FeatureStatus","description":"Status of an optional feature."},"FlagContext":{"properties":{"query_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query Text"},"chunk_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Chunk Text"},"chunk_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Chunk Id"},"entity_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Id"},"entity_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Name"},"relationship_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Relationship Id"},"document_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Document Id"},"document_title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Document Title"},"request_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Id"},"retrieval_trace":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Retrieval Trace"}},"type":"object","title":"FlagContext","description":"Context information for a flag."},"FlagCreateRequest":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"flag_type":{"type":"string","title":"Flag Type"},"target_type":{"type":"string","title":"Target Type"},"target_id":{"type":"string","title":"Target Id"},"reported_by":{"type":"string","title":"Reported By","default":"analyst"},"comment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Comment"},"context":{"anyOf":[{"$ref":"#/components/schemas/FlagContext"},{"type":"null"}]}},"type":"object","required":["tenant_id","flag_type","target_type","target_id"],"title":"FlagCreateRequest","description":"Create flag request."},"FlagDetail":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"type":{"type":"string","title":"Type"},"status":{"type":"string","title":"Status"},"reported_by":{"type":"string","title":"Reported By"},"target_type":{"type":"string","title":"Target Type"},"target_id":{"type":"string","title":"Target Id"},"comment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Comment"},"snippet_preview":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Snippet Preview"},"created_at":{"type":"string","title":"Created At"},"resolved_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved At"},"resolved_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved By"},"context":{"$ref":"#/components/schemas/FlagContext"},"resolution_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolution Notes"},"merge_target_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Merge Target Id"}},"type":"object","required":["id","tenant_id","type","status","reported_by","target_type","target_id","created_at","context"],"title":"FlagDetail","description":"Detailed flag information including context."},"FlagListResponse":{"properties":{"flags":{"items":{"$ref":"#/components/schemas/FlagSummary"},"type":"array","title":"Flags"},"total":{"type":"integer","title":"Total"},"pending_count":{"type":"integer","title":"Pending Count"},"resolved_count":{"type":"integer","title":"Resolved Count"}},"type":"object","required":["flags","total","pending_count","resolved_count"],"title":"FlagListResponse","description":"List of flags response."},"FlagResolution":{"properties":{"action":{"type":"string","title":"Action","description":"Resolution action: accept, reject, merge"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Resolution notes"},"merge_target_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Merge Target Id","description":"Target entity ID for merge action"}},"type":"object","required":["action"],"title":"FlagResolution","description":"Flag resolution request."},"FlagSummary":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"type":{"type":"string","title":"Type"},"status":{"type":"string","title":"Status"},"reported_by":{"type":"string","title":"Reported By"},"target_type":{"type":"string","title":"Target Type"},"target_id":{"type":"string","title":"Target Id"},"comment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Comment"},"snippet_preview":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Snippet Preview"},"created_at":{"type":"string","title":"Created At"},"resolved_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved At"},"resolved_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved By"}},"type":"object","required":["id","tenant_id","type","status","reported_by","target_type","target_id","created_at"],"title":"FlagSummary","description":"Summary of a flag for list views."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InstallRequest":{"properties":{"feature_ids":{"items":{"type":"string"},"type":"array","title":"Feature Ids"}},"type":"object","required":["feature_ids"],"title":"InstallRequest","description":"Request to install features."},"InstallResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"results":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Results"}},"type":"object","required":["success","message"],"title":"InstallResponse","description":"Response from install request."},"JobInfo":{"properties":{"task_id":{"type":"string","title":"Task Id"},"task_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Name"},"status":{"type":"string","title":"Status"},"progress":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Progress"},"progress_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Progress Message"},"result":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Result"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"runtime_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Runtime Seconds"},"retries":{"type":"integer","title":"Retries","default":0}},"type":"object","required":["task_id","status"],"title":"JobInfo","description":"Job information response."},"JobListResponse":{"properties":{"jobs":{"items":{"$ref":"#/components/schemas/JobInfo"},"type":"array","title":"Jobs"},"total":{"type":"integer","title":"Total"},"active_count":{"type":"integer","title":"Active Count"},"reserved_count":{"type":"integer","title":"Reserved Count"}},"type":"object","required":["jobs","total","active_count","reserved_count"],"title":"JobListResponse","description":"List of jobs response."},"JobStatus":{"type":"string","enum":["PENDING","STARTED","PROGRESS","SUCCESS","FAILURE","REVOKED","RETRY"],"title":"JobStatus","description":"Celery task states."},"LivenessResponse":{"properties":{"status":{"type":"string","title":"Status"},"timestamp":{"type":"string","title":"Timestamp"},"version":{"type":"string","title":"Version"}},"type":"object","required":["status","timestamp","version"],"title":"LivenessResponse","description":"Liveness probe response."},"MaintenanceResult":{"properties":{"operation":{"type":"string","title":"Operation"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"},"items_affected":{"type":"integer","title":"Items Affected","default":0},"duration_seconds":{"type":"number","title":"Duration Seconds","default":0}},"type":"object","required":["operation","status","message"],"title":"MaintenanceResult","description":"Result of a maintenance operation."},"QueryFilters":{"properties":{"document_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Document Ids","description":"Limit search to specific documents"},"date_range":{"anyOf":[{"$ref":"#/components/schemas/DateRange"},{"type":"null"}],"description":"Filter by document date range"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags","description":"Filter by document tags"}},"type":"object","title":"QueryFilters","description":"Filters to narrow query scope."},"QueryOptions":{"properties":{"search_mode":{"$ref":"#/components/schemas/SearchMode","description":"Search strategy to use (default: basic)","default":"basic"},"use_hyde":{"type":"boolean","title":"Use Hyde","description":"Use Hypothetical Document Embeddings","default":false},"use_rewrite":{"type":"boolean","title":"Use Rewrite","description":"Enable query rewriting for better context resolution","default":true},"use_decomposition":{"type":"boolean","title":"Use Decomposition","description":"Enable query decomposition for complex questions","default":false},"include_trace":{"type":"boolean","title":"Include Trace","description":"Include execution trace in response","default":false},"max_chunks":{"type":"integer","maximum":50.0,"minimum":1.0,"title":"Max Chunks","description":"Maximum chunks to retrieve","default":10},"traversal_depth":{"type":"integer","maximum":5.0,"minimum":0.0,"title":"Traversal Depth","description":"Graph traversal depth for entity expansion","default":2},"include_sources":{"type":"boolean","title":"Include Sources","description":"Include source citations in response","default":true},"stream":{"type":"boolean","title":"Stream","description":"Stream response tokens (SSE)","default":false}},"type":"object","title":"QueryOptions","description":"Options controlling query behavior."},"QueryRequest":{"properties":{"query":{"type":"string","maxLength":10000,"minLength":1,"title":"Query","description":"The question or query to answer"},"filters":{"anyOf":[{"$ref":"#/components/schemas/QueryFilters"},{"type":"null"}],"description":"Optional filters to narrow scope"},"options":{"anyOf":[{"$ref":"#/components/schemas/QueryOptions"},{"type":"null"}],"description":"Query execution options"},"conversation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conversation Id","description":"Conversation ID for multi-turn context"}},"type":"object","required":["query"],"title":"QueryRequest","description":"Query request payload.","example":{"options":{"include_trace":true,"max_chunks":5},"query":"What are the main features of the GraphRAG system?"}},"QueryResponse":{"properties":{"answer":{"type":"string","title":"Answer","description":"Generated answer"},"sources":{"items":{"$ref":"#/components/schemas/Source"},"type":"array","title":"Sources","description":"Source citations"},"trace":{"anyOf":[{"items":{"$ref":"#/components/schemas/TraceStep"},"type":"array"},{"type":"null"}],"title":"Trace","description":"Execution trace (if requested)"},"timing":{"$ref":"#/components/schemas/TimingInfo","description":"Timing information"},"conversation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conversation Id","description":"Conversation ID for follow-up queries"},"follow_up_questions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Follow Up Questions","description":"Suggested follow-up questions"}},"type":"object","required":["answer","timing"],"title":"QueryResponse","description":"Query response payload.","example":{"answer":"The GraphRAG system combines vector similarity search with knowledge graph reasoning...","sources":[{"chunk_id":"chunk_abc123_00001","document_id":"doc_abc123","document_name":"architecture.pdf","page":5,"score":0.92,"text":"The system integrates vector and graph retrieval..."}],"timing":{"generation_ms":1000.2,"retrieval_ms":200.3,"total_ms":1250.5}}},"QueueInfo":{"properties":{"queue_name":{"type":"string","title":"Queue Name"},"message_count":{"type":"integer","title":"Message Count"},"consumer_count":{"type":"integer","title":"Consumer Count"}},"type":"object","required":["queue_name","message_count","consumer_count"],"title":"QueueInfo","description":"Queue status information."},"QueuesResponse":{"properties":{"queues":{"items":{"$ref":"#/components/schemas/QueueInfo"},"type":"array","title":"Queues"},"workers":{"items":{"$ref":"#/components/schemas/WorkerInfo"},"type":"array","title":"Workers"},"total_active_tasks":{"type":"integer","title":"Total Active Tasks"}},"type":"object","required":["queues","workers","total_active_tasks"],"title":"QueuesResponse","description":"Queue and worker status response."},"ReadinessResponse":{"properties":{"status":{"type":"string","title":"Status"},"timestamp":{"type":"string","title":"Timestamp"},"dependencies":{"additionalProperties":{"$ref":"#/components/schemas/DependencyStatus"},"type":"object","title":"Dependencies"}},"type":"object","required":["status","timestamp","dependencies"],"title":"ReadinessResponse","description":"Readiness probe response with dependency status."},"ReconciliationStatus":{"properties":{"sync_status":{"type":"string","title":"Sync Status"},"last_sync_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Sync At"},"sync_lag_seconds":{"type":"number","title":"Sync Lag Seconds","default":0},"pending_writes":{"type":"integer","title":"Pending Writes","default":0},"failed_writes":{"type":"integer","title":"Failed Writes","default":0},"retry_queue_depth":{"type":"integer","title":"Retry Queue Depth","default":0},"errors":{"items":{},"type":"array","title":"Errors"}},"type":"object","required":["sync_status"],"title":"ReconciliationStatus","description":"Dual-write reconciliation status."},"RequiredServicesResponse":{"properties":{"all_available":{"type":"boolean","title":"All Available"},"services":{"additionalProperties":{"$ref":"#/components/schemas/ServiceStatus"},"type":"object","title":"Services"}},"type":"object","required":["all_available","services"],"title":"RequiredServicesResponse","description":"Response for required services check."},"RetrievalWeights":{"properties":{"vector_weight":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Vector Weight","description":"Vector search weight","default":0.35},"graph_weight":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Graph Weight","description":"Graph search weight","default":0.35},"rerank_weight":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Rerank Weight","description":"Reranking influence","default":0.3}},"type":"object","title":"RetrievalWeights","description":"Retrieval fusion weights."},"RunBenchmarkRequest":{"properties":{"dataset_name":{"type":"string","title":"Dataset Name"},"metrics":{"items":{"type":"string"},"type":"array","title":"Metrics","default":["faithfulness","response_relevancy"]}},"type":"object","required":["dataset_name"],"title":"RunBenchmarkRequest","description":"Request to trigger a benchmark run."},"RunBenchmarkResponse":{"properties":{"benchmark_run_id":{"type":"string","title":"Benchmark Run Id"},"task_id":{"type":"string","title":"Task Id"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["benchmark_run_id","task_id","status","message"],"title":"RunBenchmarkResponse","description":"Response after triggering a benchmark."},"SearchMode":{"type":"string","enum":["basic","local","global","drift","structured"],"title":"SearchMode","description":"Available search strategies."},"ServiceStatus":{"properties":{"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["status","message"],"title":"ServiceStatus","description":"Status of a required service."},"SetupStatusResponse":{"properties":{"initialized":{"type":"boolean","title":"Initialized"},"setup_complete":{"type":"boolean","title":"Setup Complete"},"features":{"items":{"$ref":"#/components/schemas/FeatureStatus"},"type":"array","title":"Features"},"summary":{"$ref":"#/components/schemas/SetupSummary"}},"type":"object","required":["initialized","setup_complete","features","summary"],"title":"SetupStatusResponse","description":"Response for setup status endpoint."},"SetupSummary":{"properties":{"total":{"type":"integer","title":"Total"},"installed":{"type":"integer","title":"Installed"},"installing":{"type":"integer","title":"Installing"},"not_installed":{"type":"integer","title":"Not Installed"}},"type":"object","required":["total","installed","installing","not_installed"],"title":"SetupSummary","description":"Summary of feature installation status."},"Source":{"properties":{"chunk_id":{"type":"string","title":"Chunk Id","description":"Chunk identifier"},"document_id":{"type":"string","title":"Document Id","description":"Parent document identifier"},"document_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Document Name","description":"Document filename"},"text":{"type":"string","title":"Text","description":"Relevant text excerpt"},"score":{"type":"number","title":"Score","description":"Relevance score (0-1)"},"page":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Page","description":"Page number if applicable"}},"type":"object","required":["chunk_id","document_id","text","score"],"title":"Source","description":"A source citation for an answer."},"StructuredQueryResponse":{"properties":{"query_type":{"type":"string","title":"Query Type","description":"Type of structured query executed"},"data":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Data","description":"Tabular result data"},"count":{"type":"integer","title":"Count","description":"Number of results"},"timing":{"$ref":"#/components/schemas/TimingInfo","description":"Timing information"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Human-readable summary of results"}},"type":"object","required":["query_type","count","timing"],"title":"StructuredQueryResponse","description":"Response for structured queries (list, count, aggregates).","example":{"count":2,"data":[{"filename":"report.pdf","id":"doc_123","status":"ready"},{"filename":"analysis.docx","id":"doc_456","status":"ready"}],"message":"Found 2 documents","query_type":"list_documents","timing":{"total_ms":45.2}}},"SystemStats":{"properties":{"database":{"$ref":"#/components/schemas/DatabaseStats"},"cache":{"$ref":"#/components/schemas/CacheStats"},"vector_store":{"$ref":"#/components/schemas/VectorStoreStats"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["database","cache","vector_store","timestamp"],"title":"SystemStats","description":"Combined system statistics."},"TenantConfigResponse":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"config":{"additionalProperties":true,"type":"object","title":"Config"},"weights":{"anyOf":[{"$ref":"#/components/schemas/RetrievalWeights"},{"type":"null"}]},"top_k":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Top K","default":10},"expansion_depth":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Expansion Depth","default":2},"similarity_threshold":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Similarity Threshold","default":0.7},"reranking_enabled":{"type":"boolean","title":"Reranking Enabled","default":true},"hyde_enabled":{"type":"boolean","title":"Hyde Enabled","default":false},"graph_expansion_enabled":{"type":"boolean","title":"Graph Expansion Enabled","default":true},"embedding_model":{"type":"string","title":"Embedding Model","default":"text-embedding-3-small"},"generation_model":{"type":"string","title":"Generation Model","default":"gpt-4o-mini"},"system_prompt_override":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"System Prompt Override"}},"type":"object","required":["tenant_id","config"],"title":"TenantConfigResponse","description":"Tenant configuration response."},"TenantConfigUpdate":{"properties":{"top_k":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":1.0},{"type":"null"}],"title":"Top K"},"expansion_depth":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":1.0},{"type":"null"}],"title":"Expansion Depth"},"similarity_threshold":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Similarity Threshold"},"weights":{"anyOf":[{"$ref":"#/components/schemas/RetrievalWeights"},{"type":"null"}]},"reranking_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Reranking Enabled"},"hyde_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Hyde Enabled"},"graph_expansion_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Graph Expansion Enabled"},"embedding_model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Embedding Model"},"generation_model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Generation Model"},"system_prompt_override":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"System Prompt Override"}},"type":"object","title":"TenantConfigUpdate","description":"Tenant configuration update request."},"TimingInfo":{"properties":{"total_ms":{"type":"number","title":"Total Ms","description":"Total query time in milliseconds"},"analysis_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Analysis Ms","description":"Query analysis and routing time"},"retrieval_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Retrieval Ms","description":"Retrieval phase time"},"reranking_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Reranking Ms","description":"Reranking phase time"},"generation_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Generation Ms","description":"Generation phase time"}},"type":"object","required":["total_ms"],"title":"TimingInfo","description":"Timing breakdown for the query."},"TraceStep":{"properties":{"step":{"type":"string","title":"Step","description":"Step name"},"duration_ms":{"type":"number","title":"Duration Ms","description":"Step duration in milliseconds"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details","description":"Step-specific details"}},"type":"object","required":["step","duration_ms"],"title":"TraceStep","description":"A single step in the query execution trace."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VectorCollectionInfo":{"properties":{"name":{"type":"string","title":"Name"},"count":{"type":"integer","title":"Count"},"dimensions":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Dimensions"},"index_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Index Type"},"memory_mb":{"type":"number","title":"Memory Mb","default":0.0}},"type":"object","required":["name","count"],"title":"VectorCollectionInfo","description":"Information about a single vector collection."},"VectorCollectionsResponse":{"properties":{"collections":{"items":{"$ref":"#/components/schemas/VectorCollectionInfo"},"type":"array","title":"Collections"}},"type":"object","required":["collections"],"title":"VectorCollectionsResponse","description":"Response with all vector collections info."},"VectorStoreStats":{"properties":{"collections_count":{"type":"integer","title":"Collections Count","default":0},"vectors_total":{"type":"integer","title":"Vectors Total","default":0},"index_size_bytes":{"type":"integer","title":"Index Size Bytes","default":0}},"type":"object","title":"VectorStoreStats","description":"Vector store statistics."},"WorkerInfo":{"properties":{"hostname":{"type":"string","title":"Hostname"},"status":{"type":"string","title":"Status"},"active_tasks":{"type":"integer","title":"Active Tasks"},"processed_total":{"type":"integer","title":"Processed Total"},"concurrency":{"type":"integer","title":"Concurrency"},"queues":{"items":{"type":"string"},"type":"array","title":"Queues"}},"type":"object","required":["hostname","status","active_tasks","processed_total","concurrency","queues"],"title":"WorkerInfo","description":"Worker status information."}}},"tags":[{"name":"health","description":"Health check endpoints for liveness and readiness probes"},{"name":"query","description":"Query the knowledge base and get answers"},{"name":"documents","description":"Document upload, management, and retrieval"}]}